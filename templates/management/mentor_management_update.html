{% extends 'base_app.html' %}
{% load custom_filter %}

{% block body_block %}

<div class="container py-lg-5 pb-5">
	<div class="row pt-3">
		<div class="col-12 col-lg-3">
			
			<div class="side-menu-top">
				<img src="{{ mentor_data.mentor.profile_pic|profile_pic }}" alt="profile-pic">
				<span class="mt-3">{{ mentor_data.mentor }}</span>
				<span class="text-muted small">{{ mentor_data.mentor.username }}</span>
			</div>
			<form method="POST" enctype="multipart/form-data" class="mt-4">
				{% csrf_token %}
				{{form.as_p}}
				<div class="form-group mt-4">
					<button type="submit" class="btn btn-block btn-sm btn-primary">Update</button>
				</div>
			</form>
			
		</div>
		<div class="col-12 col-lg-9">
			<h5>Data Mentor</h5>
			<p>Anda dapat melihat informasi dan berkas dari mentor ini.</p>
			<div class="row">
				<div class="col-12 mb-3">
					<div class="card">
						<div class="card-body">
							<h6 class="card-title">Informasi Mentor</h6>
							<table class="table table-borderless small">
								<tbody>
									<tr>
										<th scope="row" width="20%">Nama</th>
										<td>: {{ mentor_data.mentor }}</td>
									</tr>
									<tr>
										<th scope="row">Email</th>
										<td>: {{ mentor_data.mentor.email }}</td>
									</tr>
									<tr>
										<th scope="row">No. Telepon</th>
										<td>: {{ mentor_data.mentor.phone }}</td>
									</tr>
									<tr>
										<th scope="row">Alamat</th>
										<td>: {{ mentor_data.mentor.address }}</td>
									</tr>
									<tr>
										<th scope="row">Jadwal</th>
										<td>: <a href="#modalSchedule" data-toggle="modal">Lihat Jadwal</a></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
				<div class="col-12 mb-3">
					<div class="card">
						<div class="card-body">
							<h6 class="card-title">Berkas Mentor</h6>
							<table class="table table-borderless small">
								<tbody>
									<tr>
										<th scope="row" width="20%">Nomor KTP</th>
										<td>: {{ mentor_data.no_ktp }}</td>
									</tr>
									<tr>
										<th scope="row">Scan KTP</th>
										<td>: 
											<a href="{{mentor_data.ktp|mentor_data}}" target="_blank">
												<i class="las la-file-image mr-1"></i>
												<span>File KTP</span>
											</a>
										</td>
									</tr>
									<tr>
										<th scope="row">File Sertifikasi</th>
										<td>: 
											<a href="{{mentor_data.certification|mentor_data}}" target="_blank">
												<i class="las la-file-pdf mr-1"></i>
												<span>File Sertifikasi</span>
											</a>
										</td>
									</tr>
									<tr>
										<th scope="row">File CV</th>
										<td>: 
											<a href="{{mentor_data.cv|mentor_data}}" target="_blank">
												<i class="las la-file-pdf mr-1"></i>
												<span>File CV</span>
											</a>
										</td>
									</tr>
									<tr>
										<th scope="row">Portofolio</th>
										<td>: 
											<a href="{{mentor_data.portofolio|mentor_data}}" target="_blank">
												<i class="las la-file-pdf mr-1"></i>
												<span>File Portofolio</span>
											</a>
										</td>
									</tr>
									<tr>
										<th scope="row">NPWP</th>
										<td>: 
											<a href="{{mentor_data.npwp|mentor_data}}" target="_blank">
												<i class="las la-file-pdf mr-1"></i>
												<span>File NPWP</span>
											</a>
										</td>
									</tr>
								</tbody>
							</table>
							
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="modalSchedule" tabindex="-1" aria-labelledby="modalScheduleLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h6 class="modal-title" id="modalScheduleLabel">Jadwal Free Time Mentor</h6>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div id="schedule-table" class="table-responsive">
					<table class="table table-bordered small">
						<thead>
							<tr>
								<th>Jam (GMT+7)</th>
								<th width="11%">Minggu</th>
								<th width="11%">Senin</th>
								<th width="11%">Selasa</th>
								<th width="11%">Rabu</th>
								<th width="11%">Kamis</th>
								<th width="11%">Jumat</th>
								<th width="11%">Sabtu</th>
							</tr>
						</thead>
						<tbody>
							<tr v-for="(item, i) in checklist">
								<th scoped="row"><span v-text="i+7"></span>.00</th>
								<td v-for="(subitem, j) in item" :class="{checked: subitem}"></td>
							</tr>
						</tbody>
					</table>
				</div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block body_js %}
<script>
	const scheduleTable = new Vue({
        el: '#schedule-table',
        data: {
            free_time_data: [{
                    mentor: "Fandi",
                    day: "MON",
                    time: "09:00:00",
                },
                {
                    mentor: "Ivan",
                    day: "MON",
                    time: "09:00:00",
                },
                {
                    mentor: "Fandi",
                    day: "FRI",
                    time: "09:00:00",
                },
                {
                    mentor: "Fandi",
                    day: "FRI",
                    time: "19:00:00",
                },
            ],
            dayAssoc: ["SUN", "MON", "TUE", "WED", "THU", "FRI", "SAT"],
            checklist: [],
        },
        methods: {
            initSchedule: function () {
                for (var i = 7; i < 23; i++) {
                    arr = [];
                    for (var j = 0; j < 7; j++) {
                        let found = this.free_time_data.some(
                            (item) =>
                            item.day === this.dayAssoc[j] &&
                            parseInt(item.time.split(":", 1)) === i
                        );
                        if (found) {
                            arr.push(true);
                        } else {
                            arr.push(false);
                        }
                    }
                    this.checklist.push(arr);
                }
            },
        },
        created: function () {
            this.initSchedule();
        }
    });
</script>
{% endblock %}