{% extends 'classroom/base_app.html' %}
{% load custom_filter %}
{% load widget_tweaks %}

{% block title_nav %} {{ library.course.title }} {% endblock %}

{% block classroom_menu %}
    {% include 'ext/classroom_menu.html' with course=library.course %}
{% endblock %}

{% block body_block %}
<div class="container-fluid pb-5">
    <div class="row pt-3">
        <div class="col-12 mb-3">
            <h5>Penilaian</h5>
        </div>
    </div>

    <div class="row">
        <div class="col-12 mb-3">
            <div class="card">
                <div class="card-header">Library - {{ library.user }}</div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-12 col-lg-6">
                            <div class="small text-muted">Projek</div>
                            <div class="list-group">
                                {% for ea in library.exams %}
                                    {% if ea.answer %}
                                        {% if request.resolver_match.app_name == 'management' %}
                                            <a href="{% url 'management:report' ea.answer.id %}" target="_blank" class="badge badge-pill badge-primary text-white">Nomor {{forloop.counter}}</a>
                                        {% elif request.resolver_match.app_name == 'mentor' %}
                                            <a href="{% url 'mentor:report-detail' ea.answer.id %}" target="_blank" class="badge badge-pill badge-primary text-white">Nomor {{forloop.counter}}</a>
                                        {% endif %}   
                                    {% else %}
                                        <a href="#" class="badge badge-pill badge-secondary text-white">Nomor {{forloop.counter}}</a>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12 mb-3">
            <div class="card">
                <div class="card-header">Evaluasi - {{ library.user }}</div>
                <div class="card-body">                    
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr class="small">
                                    <th scope="col" width="20%">Mentor</th>
                                    <th scope="col" width="15%">Management</th>
                                    <th scope="col" width="15%">Creative</th>
                                    <th scope="col" width="15%">Analisa</th>
                                    <th scope="col" width="15%">Komunikasi</th>
                                    <th scope="col" width="15%">Desain</th>
                                    <th scope="col" width="15%">Logika</th>
                                    <th scope="col" width="5%">Summary</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for eval in library.mentor_evaluation %}
                                {% with evaluation_data=eval.evaluation %}
                                <tr>
                                    <td>{{eval.mentor}}</td>
                                    <td>{{evaluation_data.management|get_evaluation_value}}</td>
                                    <td>{{evaluation_data.creative|get_evaluation_value}}</td>
                                    <td>{{evaluation_data.analisa|get_evaluation_value}}</td>
                                    <td>{{evaluation_data.komunikasi|get_evaluation_value}}</td>
                                    <td>{{evaluation_data.desain|get_evaluation_value}}</td>
                                    <td>{{evaluation_data.logika|get_evaluation_value}}</td>
                                    <td>{{evaluation_data.summary|get_evaluation_value}}</td>
                                </tr>
                                {% endwith %}
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}