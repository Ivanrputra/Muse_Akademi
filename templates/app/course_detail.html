{% extends 'base_app.html' %}
{% load custom_filter %}
{% load static %}

{% block body_css %}
    <style>
        .session-course-item {
            display: flex;
            align-items: center;
            padding: 5px;
        }
        
        .session-course-item i {
            font-size: 48px;
            margin-right: 5px;
        }
        
        .session-course-item div {
            display: flex;
            flex-direction: column;
        }
        
        .session-course-title {
            font-weight: bold;
            font-size: 0.9em;
        }
        
        .session-course-detail {
            display: flex;
            flex-direction: column;
        }
        
        .session-course-detail span{
            font-size: 0.8em;
        }
        
        .session-course-detail i {
            font-size: 1.2em;
        }

        @media (min-width: 992px) {
            #imgcover {
                position: -webkit-sticky;
                position: sticky;
                top: 100px;
            }

            .session-course-detail {
                flex-direction: row;
            }
        
            .session-course-detail i {
                margin-left: 10px;
            }
        }
    </style>
{% endblock %}

{% block body_block %}
<div class="container py-lg-5">
    <div class="row">
        <div class="col-12 col-lg-6 order-lg-2 mb-3">
            <img id="imgcover" src="{{course.course_pic|course_pic}}" width="100%" alt="">
        </div>
        <div class="col-12 col-lg-6 order-lg-1">
            <h4>{{course.title}}</h4>
            <div>
                <div>
                    <i class="las la-calendar-day"></i>
                    <span class="ml-2">{{ course.start_at }} - {{ course.close_at }}</span>
                </div>
                <!-- <div>
                    <i class="las la-graduation-cap"></i>
                    <span class="ml-2">{{ course.students|length }} siswa</span>
                </div> -->
                <div>
                    <i class="las la-tag"></i>
                    <span class="ml-2">{{course.type_str}}</span>
                </div>
            </div>
            <h4> {% if course.is_free %} Free {% else %} Rp {{course.price}} {% endif %}</h4>
            <!-- Cek jika belum membeli -->
            <a href="{% url 'app:checkout' course.id %}" class="btn btn-danger my-3">Beli Kursus</a>
            <!-- Cek jika sudah membeli -->
            <a href="{% url 'app:dashboard-classroom' course.id %}" class="btn btn-sm btn-block btn-danger my-3 d-none">Masuk Kursus</a>
            <div class="mt-5">
                <h6>Deskripsi</h6>
                <p class="small">{{ course.description }}</p>
            </div>
            <div class="my-4">
                <h6>Jadwal Sesi Kursus</h6>
                {% for session in course.sessions %}
                <div class="card mb-2">
                    <div class="session-course-item">
                        <i class="las la-calendar-day text-primary"></i>
                        <div>
                            <a href="{% url 'app:classroom-session' session.id %}" 
                                class="session-course-title">{{session.title}}</a>
                            <span class="text-muted session-course-detail">
                                <span>{{ session.start_at }}</span>
                                <span>
                                    <i class="las la-user-tie"></i>
                                        {% include 'ext/mentors.html' with mentors=session.mentor.all %}
                                    </span>
                            </span>
                        </div>
                        </div>
                    </div>
                {% empty %}
                    <div class="text-center small">Belum ada sesi.</div>
                {% endfor %}
            </div>
            <h5>Mentor</h5>
            <div class="d-flex flex-row flex-nowrap overflow-auto my-4">
                {% for mentor in course.mentors %}
                <div class="media" style="flex: none;">
                    <img src="{{ mentor.profile_pic|profile_pic }}" class="mr-3" alt="..." style="width: 64px; border-radius: 50%">
                    <div class="media-body">
                        <h6 class="mt-0">{{ mentor }}</h6>
                        <div class="small">{{ mentor.email }}</div>
                        <div class="small">@{{ mentor.username }}</div>
                    </div>
                </div>
                {% empty %}
                    Tidak ada Mentor
                {% endfor %}
            </div>
            <h5>Penilaian Kursus</h5>
            <div>
                <div class="card p-3 small">
                    <div class="media">
                        <img src="{% static 'img/blank-avatar.png' %}" class="mr-3" alt="..." style="width: 36px; border-radius: 50%">
                        <div class="media-body">
                            <span class="mt-0"><strong>ANonym</strong></span>
                            <div>
                                <strong>4,7</strong>
                                <span class="ml-2 text-warning">
                                    <i class="las la-star"></i>
                                    <i class="las la-star"></i>
                                    <i class="las la-star"></i>
                                    <i class="las la-star"></i>
                                    <i class="las la-star"></i>
                                </span>
                            </div>
                            <p>
                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Accusantium, voluptates?
                            </p>
                        </div>
                    </div>
                </div>
                <div class="text-center py-3 mb-5">
                    <a href="#!" class="text-link small">Lebih Banyak</a>
                </div>
            </div>
        </div>

    </div>
</div>

{% endblock %}